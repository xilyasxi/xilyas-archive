<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Xilyas Portfolio // System Log</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'Helvetica', 'Arial', 'sans-serif'],
              mono: ['JetBrains Mono', 'Fira Code', 'monospace'],
            },
            colors: {
              zinc: {
                850: '#1a1a1a',
                900: '#111111',
                950: '#000000', // True Black
              }
            }
          },
        },
      }
    </script>

    <!-- GSAP Animation Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500&family=JetBrains+Mono:wght@300;400;500&display=swap');
      
      body {
        margin: 0;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      
      .no-scrollbar::-webkit-scrollbar { display: none; }
      .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
  </head>
  <body class="bg-zinc-950 text-white transition-colors duration-700 ease-in-out selection:bg-zinc-700 selection:text-white">
    
    <!-- Background Ambience -->
    <div id="ambient-bg" class="fixed inset-0 pointer-events-none z-0 overflow-hidden">
       <div class="absolute inset-0 opacity-[0.05] bg-[url('https://upload.wikimedia.org/wikipedia/commons/7/76/1k_filmgrain.png')] animate-pulse"></div>
       <div id="blob-1" class="absolute top-[-10%] left-[-10%] w-[50%] h-[50%] rounded-full blur-[120px] transition-colors duration-1000 bg-indigo-900/10"></div>
       <div id="blob-2" class="absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] rounded-full blur-[120px] transition-colors duration-1000 bg-emerald-900/5"></div>
    </div>

    <!-- Theme Toggle -->
    <div class="fixed top-6 right-6 z-50">
      <button 
        onclick="toggleTheme()"
        id="theme-btn"
        class="h-8 px-4 rounded-full flex items-center justify-center transition-all duration-300 hover:bg-current/5 backdrop-blur-sm hover:opacity-100 opacity-60"
      >
        <!-- Removed border classes and font-bold -->
        <span id="theme-text" class="text-[9px] font-sans tracking-[0.2em] uppercase">LIGHT</span>
      </button>
    </div>

    <!-- Main Content Root -->
    <main id="root" class="relative z-10 min-h-screen"></main>

    <script>
      // ==========================================
      // DATA
      // ==========================================
      const PROJECTS = [
        {
          id: 'FILE_01',
          client: 'AMANA_CAPITAL',
          role: 'PRODUCT_DESIGN',
          title: 'INSTITUTIONAL_DIGITAL_ASSETS',
          desc: 'Designed a SAMA-compliant platform bridging Islamic finance and blockchain RWA tokenization with a protocol-first aesthetic.',
          metric: 'COGNITIVE_LOAD_DOWN_52PCT',
          image: 'assets/amana/amana_1.png',
          folder: 'amana',
          tags: ['FINTECH', 'ISLAMIC_FINANCE', 'AI'],
          year: '2024',
          sector: 'FINTECH / WEB3',
          longDesc: 'A comprehensive overhaul of institutional trading interfaces, focusing on high-frequency data visualization and regulatory compliance within the GCC market. The system integrates real-time blockchain settlement layers with traditional fiat rails, reducing trade execution time by 40% while maintaining strict Sharia compliance protocols.',
          gallery: [
            { title: 'TOKENIZATION_FLOW', desc: 'User journey mapping for Real World Asset (RWA) onboarding.', image: 'assets/amana/amana_2.png' },
            { title: 'COMPLIANCE_DASHBOARD', desc: 'Real-time SAMA regulatory monitoring interface.', image: 'assets/amana/amana_3.png' },
            { title: 'TRADING_BLOTTER', desc: 'High-density order management system with minimal latency.', image: 'assets/amana/amana_4.png' },
            { title: 'ISLAMIC_FRAMEWORK', desc: 'Visualizing Murabaha and Sukuk structures.', image: 'assets/amana/amana_5.png' },
            { title: 'MOBILE_APPROVALS', desc: 'Biometric authorization flow for institutional transfers.', image: 'assets/amana/amana_6.png' },
            { title: 'DESIGN_SYSTEM', desc: 'Typography and color palette strictly adhering to accessibility standards.', image: 'assets/amana/amana_7.png' }
          ]
        },
        {
          id: 'FILE_02',
          client: 'AL_MIZAN_ADVISORY',
          role: 'UI_UX_DESIGN',
          title: 'WEALTH_ARCHITECTURE',
          desc: 'Repositioned GCC advisory firm as technical authority via dossier-style interface and AI Strategic Insight Engine.',
          metric: 'QUALIFIED_INQUIRIES_UP_3_2X',
          image: 'assets/almizan/almizan_1.png',
          folder: 'almizan',
          tags: ['WEALTH_STRATEGY', 'GCC_MARKETS', 'AI'],
          year: '2023',
          sector: 'ADVISORY / AI',
          longDesc: 'Development of a "Digital Private Office" for high-net-worth individuals. The interface utilizes a dossier-style layout to present complex wealth structuring data. An integrated AI Insight Engine processes market signals to provide hyper-personalized investment memos, transforming the advisory relationship from reactive to proactive.',
          gallery: [
            { title: 'DOSSIER_INTERFACE', desc: 'Information architecture inspired by classified intelligence files.', image: 'assets/almizan/almizan_2.png' },
            { title: 'AI_INSIGHT_WIDGET', desc: 'Natural language processing for market sentiment analysis.', image: 'assets/almizan/almizan_3.png' },
            { title: 'PORTFOLIO_VISUALIZATION', desc: 'Tree-map generation for multi-asset allocation views.', image: 'assets/almizan/almizan_4.png' },
            { title: 'CLIENT_ONBOARDING', desc: 'Streamlined KYC process reducing friction for HNWI clients.', image: 'assets/almizan/almizan_5.png' },
            { title: 'REPORT_GENERATION', desc: 'Automated PDF synthesis for quarterly performance reviews.', image: 'assets/almizan/almizan_6.png' },
            { title: 'DARK_MODE_THEME', desc: 'High-contrast aesthetic for low-light trading environments.', image: 'assets/almizan/almizan_7.png' }
          ]
        },
        {
          id: 'FILE_03',
          client: 'VERIDIAN_DOCS',
          role: 'PRODUCT_ENGINEERING',
          title: 'TECHNICAL_CLARITY_SYSTEMS',
          desc: 'Built a CLI-like documentation platform for RegTech clients using border-driven grids and canvas-generated depth.',
          metric: 'ENTERPRISE_RETAINERS_CLOSED',
          image: 'assets/veridian/veridian_1.png',
          folder: 'veridian',
          tags: ['REGTECH', 'DEVELOPER_TOOLS', 'SYSTEMS'],
          year: '2025',
          sector: 'SAAS / DEV_TOOLS',
          longDesc: 'A documentation platform designed for engineering teams in highly regulated industries. The UI mimics a Command Line Interface (CLI) to reduce context switching for developers, while offering powerful search and versioning capabilities. The aesthetic uses border-driven grids to establish hierarchy without visual clutter.',
          gallery: [
            { title: 'CLI_SEARCH_MODULE', desc: 'Command-palette style navigation for rapid documentation lookup.', image: 'assets/veridian/veridian_2.png' },
            { title: 'API_REFERENCE', desc: 'Auto-generated swagger UI with interactive testing console.', image: 'assets/veridian/veridian_3.png' },
            { title: 'VERSION_CONTROL_UI', desc: 'Visualizing diffs between regulatory compliance versions.', image: 'assets/veridian/veridian_4.png' },
            { title: 'GRID_LAYOUT_SYSTEM', desc: 'Responsive grid architecture handling dense technical data.', image: 'assets/veridian/veridian_5.png' },
            { title: 'INTERACTIVE_EXAMPLES', desc: 'Live code sandboxes embedded within regulatory guides.', image: 'assets/veridian/veridian_6.png' },
            { title: 'CANVAS_DEPTH_MAP', desc: 'WebGL background effects representing data topology.', image: 'assets/veridian/veridian_7.png' }
          ]
        }
      ];

      // ==========================================
      // STATE & INIT
      // ==========================================
      let isDarkMode = true;
      let selectedProject = null;

      // Initialize
      window.addEventListener('DOMContentLoaded', () => {
        applyTheme();
        renderListView(true); // true = animate entrance
      });

      // ==========================================
      // THEME LOGIC
      // ==========================================
      function toggleTheme() {
        isDarkMode = !isDarkMode;
        applyTheme();
        
        // Check which view is active
        if (document.getElementById('detail-container')) {
           renderDetailView(); 
        } else if (document.getElementById('contact-container')) {
           renderContactView();
        } else {
           renderListView(false); 
        }
      }

      function applyTheme() {
        const body = document.body;
        const btn = document.getElementById('theme-btn');
        const txt = document.getElementById('theme-text');
        const blob1 = document.getElementById('blob-1');
        const blob2 = document.getElementById('blob-2');

        if (isDarkMode) {
          document.documentElement.classList.add('dark');
          body.classList.remove('bg-white', 'text-black');
          body.classList.add('bg-zinc-950', 'text-white');
          
          if(txt) txt.innerText = "LIGHT";
          
          // Blobs - Subtle in dark mode
          if(blob1) {
            blob1.classList.remove('bg-indigo-300/30');
            blob1.classList.add('bg-indigo-900/10');
          }
          if(blob2) {
            blob2.classList.remove('bg-emerald-300/30');
            blob2.classList.add('bg-emerald-900/5');
          }
        } else {
          document.documentElement.classList.remove('dark');
          body.classList.remove('bg-zinc-950', 'text-white');
          body.classList.add('bg-white', 'text-black');
          
          if(txt) txt.innerText = "DARK";

          // Blobs - Stronger in light mode for visibility/depth
          if(blob1) {
            blob1.classList.remove('bg-indigo-900/10');
            blob1.classList.add('bg-indigo-300/30');
          }
          if(blob2) {
            blob2.classList.remove('bg-emerald-900/5');
            blob2.classList.add('bg-emerald-300/30');
          }
        }
        lucide.createIcons();
      }

      // ==========================================
      // ROUTING / NAVIGATION
      // ==========================================
      function openProject(id) {
        const container = document.getElementById('list-container');
        if (container) {
          gsap.to(container, {
            opacity: 0,
            y: -20,
            duration: 0.4,
            ease: 'power2.in',
            onComplete: () => {
              selectedProject = PROJECTS.find(p => p.id === id);
              renderDetailView();
              window.scrollTo(0, 0);
            }
          });
        }
      }

      function closeProject() {
        const container = document.getElementById('detail-container');
        if (container) {
          gsap.to(container, {
            opacity: 0,
            y: 20,
            duration: 0.4,
            ease: 'power2.in',
            onComplete: () => {
              selectedProject = null;
              renderListView(false); // false = no massive entrance animation, just fade in
              window.scrollTo(0, 0);
            }
          });
        }
      }

      function openContact() {
        const container = document.getElementById('list-container');
        if (container) {
          gsap.to(container, {
            opacity: 0,
            y: -20,
            duration: 0.4,
            ease: 'power2.in',
            onComplete: () => {
              renderContactView();
              window.scrollTo(0, 0);
            }
          });
        }
      }

      function closeContact() {
        const container = document.getElementById('contact-container');
        if (container) {
          gsap.to(container, {
            opacity: 0,
            y: 20,
            duration: 0.4,
            ease: 'power2.in',
            onComplete: () => {
              renderListView(false);
              window.scrollTo(0, 0);
            }
          });
        }
      }

      // ==========================================
      // RENDERING - CONTACT VIEW
      // ==========================================
      function renderContactView() {
        const root = document.getElementById('root');
        
        root.innerHTML = `
          <div id="contact-container" class="w-full max-w-[1200px] mx-auto pt-24 pb-24 px-6 md:px-12 relative min-h-screen flex flex-col justify-between">
            
            <!-- Nav -->
            <div class="flex items-center justify-between mb-24 pb-6 border-b border-current/10 contact-line-reveal origin-left scale-x-0">
              <button onclick="closeContact()" class="flex items-center gap-3 opacity-50 hover:opacity-100 transition-opacity group py-2">
                <i data-lucide="arrow-left" class="w-4 h-4 stroke-1 group-hover:-translate-x-1 transition-transform"></i>
                <span class="text-[8px] tracking-[0.4em] font-light uppercase">ARCHIVE</span>
              </button>
              <div class="hidden md:flex items-center gap-3 text-[7px] tracking-[0.2em] uppercase opacity-30 font-mono">
                <span>COMMUNICATION</span><span>/</span><span>CHANNEL_OPEN</span>
              </div>
            </div>

            <!-- Content -->
            <div class="flex-1 flex flex-col justify-center mb-24">
               <div class="contact-fade-in opacity-0 translate-y-8 mb-8">
                  <span class="text-[9px] tracking-[0.3em] font-mono opacity-40 uppercase block mb-4">INQUIRIES // COLLABORATION</span>
                  <h1 class="text-[clamp(2.5rem,8vw,6rem)] font-[100] leading-[0.9] tracking-tight uppercase">
                    CONTACT
                  </h1>
               </div>

               <div class="grid grid-cols-1 md:grid-cols-2 gap-12 contact-fade-in opacity-0 translate-y-8">
                  <div class="border-l border-current/10 pl-6 py-2">
                     <span class="block text-[8px] tracking-[0.2em] opacity-40 uppercase mb-2">DIRECT LINE</span>
                     <a href="mailto:xilyasx@proton.me" class="text-[1.5rem] md:text-[2rem] font-[200] hover:opacity-50 transition-opacity break-all">xilyasx@proton.me</a>
                  </div>
                  
                  <div class="border-l border-current/10 pl-6 py-2 space-y-8">
                     <div>
                        <span class="block text-[8px] tracking-[0.2em] opacity-40 uppercase mb-2">NETWORK</span>
                        <div class="flex gap-8">
                           <a href="#" class="text-[11px] tracking-[0.1em] uppercase hover:underline">LINKEDIN</a>
                           <a href="#" class="text-[11px] tracking-[0.1em] uppercase hover:underline">TWITTER</a>
                           <a href="#" class="text-[11px] tracking-[0.1em] uppercase hover:underline">GITHUB</a>
                        </div>
                     </div>
                     <div>
                        <span class="block text-[8px] tracking-[0.2em] opacity-40 uppercase mb-2">LOCATION</span>
                        <p class="text-[11px] tracking-[0.1em] uppercase">TOKYO, JAPAN (UTC+9)</p>
                     </div>
                  </div>
               </div>
            </div>

            <!-- Footer -->
            <footer class="contact-fade-in opacity-0 translate-y-8 border-t border-current/10 pt-8 flex justify-between items-end">
               <span class="text-[8px] tracking-[0.2em] font-mono opacity-20">SECURE CONNECTION ESTABLISHED</span>
            </footer>
          </div>
        `;

        lucide.createIcons();
        animateContact();
      }

      function animateContact() {
        const tl = gsap.timeline({ defaults: { ease: 'power3.out' } });
        tl.to('.contact-line-reveal', { scaleX: 1, duration: 1.2, ease: 'expo.out' })
          .to('.contact-fade-in', { y: 0, opacity: 1, duration: 1, stagger: 0.1 }, '-=0.8');
      }

      // ==========================================
      // RENDERING - LIST VIEW
      // ==========================================
      function renderListView(initialLoad) {
        const root = document.getElementById('root');
        
        const initHidden = initialLoad ? "opacity-0 translate-y-4" : "";
        const initLine = initialLoad ? "scale-x-0" : "";
        
        // Image styles based on mode for visibility
        const imgContainerClass = isDarkMode ? 'bg-zinc-900' : 'bg-gray-100';
        const imgClass = isDarkMode 
          ? 'grayscale opacity-60 group-hover:grayscale-0 group-hover:opacity-100' 
          : 'grayscale opacity-85 group-hover:grayscale-0 group-hover:opacity-100'; // Increased opacity for light mode

        // --- Project Rows Generation ---
        const rowsHTML = PROJECTS.map((proj, idx) => `
           <div 
             onclick="openProject('${proj.id}')"
             class="project-row group relative grid grid-cols-1 md:grid-cols-12 gap-6 md:gap-12 border-b border-current/10 pb-12 md:pb-16 last:border-0 cursor-pointer"
           >
              <!-- ID -->
              <div class="md:col-span-1 pointer-events-none flex flex-row md:flex-col justify-between items-center md:items-start border-b border-current/5 md:border-0 pb-4 md:pb-0 mb-2 md:mb-0">
                 <span class="text-[9px] md:text-[7px] tracking-[0.3em] font-mono opacity-50 md:opacity-30 block">${proj.id}</span>
                 <span class="text-[9px] md:text-[7px] tracking-[0.3em] font-mono opacity-50 md:opacity-30 block">0${idx + 1}</span>
              </div>

              <!-- Main Info -->
              <div class="md:col-span-4 z-10 relative pointer-events-none mb-4 md:mb-0">
                 <div class="mb-4 md:mb-6">
                    <span class="text-[8px] tracking-[0.2em] font-bold opacity-40 uppercase block mb-2 md:mb-1">${proj.client.replace(/_/g, ' ')}</span>
                    <h2 class="text-[1.75rem] md:text-[2rem] leading-[0.9] font-[200] uppercase tracking-wide group-hover:tracking-wider transition-all duration-500">
                      ${proj.title.replace(/_/g, ' ')}
                    </h2>
                 </div>
                 <p class="text-[11px] md:text-[10px] leading-[1.8] tracking-[0.05em] font-light opacity-60 max-w-xs mb-6">
                   ${proj.desc}
                 </p>
                 <div class="flex flex-wrap gap-2">
                    ${proj.tags.map(tag => `<span class="text-[6px] border border-current/10 px-2 py-1 uppercase tracking-[0.2em] opacity-40 font-mono">${tag}</span>`).join('')}
                 </div>
              </div>

              <!-- Visual Evidence -->
              <div class="md:col-span-7 relative w-full h-auto overflow-hidden border border-current/10 group-hover:border-current/30 transition-colors duration-500 pointer-events-none self-start">
                 <div class="w-full relative ${imgContainerClass}">
                    <img 
                      src="${proj.image}"
                      alt="${proj.title}"
                      class="w-full h-auto block ${imgClass} group-hover:scale-105 transition-all duration-700"
                    />
                    <div class="absolute inset-0 bg-[linear-gradient(rgba(0,0,0,0)_1px,transparent_1px),linear-gradient(90deg,rgba(0,0,0,0)_1px,transparent_1px)] bg-[size:40px_40px] opacity-[0.03] pointer-events-none"></div>
                 </div>

                 <div class="absolute top-0 right-0 p-4 flex flex-col items-end gap-1">
                    <span class="text-[6px] tracking-[0.3em] font-mono opacity-100 bg-current text-white dark:text-black px-2 py-0.5 uppercase">
                      ${proj.role.replace(/_/g, ' ')}
                    </span>
                    <span class="text-[6px] tracking-[0.3em] font-mono opacity-50 uppercase">
                      METRIC: ${proj.metric}
                    </span>
                 </div>
                 
                 <div class="absolute bottom-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300 transform translate-y-2 group-hover:translate-y-0 flex items-center gap-2">
                    <span class="text-[8px] tracking-[0.2em] uppercase font-bold bg-black text-white px-2 py-1">OPEN CASE</span>
                    <i data-lucide="arrow-up-right" class="w-5 h-5 stroke-1"></i>
                 </div>
              </div>
           </div>
        `).join('');

        // --- Container HTML ---
        root.innerHTML = `
        <div id="list-container" class="w-full max-w-[1200px] mx-auto py-20 px-6 md:px-12 relative min-h-screen">
          
          <!-- 01. HEADER -->
          <header class="mb-24 md:mb-32 relative">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-end mb-8">
              
              <!-- Identity -->
              <div class="port-identity space-y-2 w-full md:w-auto ${initHidden}">
                <span class="block text-[7px] tracking-[0.4em] font-mono opacity-40 uppercase mb-4 md:mb-0">
                  IDENTITY_VERIFIED // [ XILYAS ]
                </span>
                <h1 class="text-[3rem] md:text-[clamp(2.5rem,5vw,4rem)] font-[100] leading-[0.9] tracking-tight uppercase">
                  SENIOR<br/>PRODUCT<br/>DESIGNER
                </h1>
              </div>
              
              <!-- Bio -->
              <div class="port-bio max-w-md text-left md:text-right mt-12 md:mt-0 ${initHidden}">
                 <div class="flex flex-row md:flex-col items-start md:items-end gap-4 md:gap-1 mb-6 md:mb-4 text-[7px] tracking-[0.3em] font-mono opacity-30">
                    <span class="flex items-center gap-2">LOC: JAPAN <i data-lucide="map-pin" class="w-2 h-2"></i></span>
                    <span class="flex items-center gap-2">ORG: IXILIS <i data-lucide="hash" class="w-2 h-2"></i></span>
                 </div>
                 <p class="text-[11px] md:text-[11px] leading-[1.8] tracking-[0.1em] font-light uppercase opacity-70">
                   I architect coherent systems shaped by typographic discipline, spatial logic, and behavioral insight. At IXILIS I develop privacy-conscious SaaS environments utilizing agentic AI.
                 </p>
              </div>
            </div>
            
            <!-- Line & Contact Button Wrapper -->
            <div class="relative w-full">
                <!-- The Line -->
                <div class="port-header-line w-full h-px bg-current opacity-20 origin-left ${initLine}"></div>
                
                <!-- The Button -->
                <div class="absolute top-4 right-0 flex gap-4 port-contact-btn ${initHidden}">
                   <button onclick="openContact()" class="text-[8px] tracking-[0.3em] font-bold uppercase hover:opacity-100 transition-opacity opacity-70">
                     CONTACT
                   </button>
                </div>
            </div>
          </header>

          <!-- 02. INDEX -->
          <section class="space-y-16 md:space-y-24">
             <div class="flex items-center gap-4 opacity-20 mb-8 md:mb-12">
                <span class="text-[7px] tracking-[0.4em] font-mono uppercase">ARCHIVE_INDEX</span>
                <div class="h-px flex-1 bg-current"></div>
             </div>
             ${rowsHTML}
          </section>

          <!-- 03. FOOTER -->
          <section class="mt-24 md:mt-40 border-t border-current/10 pt-16 md:pt-20 pb-20">
             <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                <div>
                   <h3 class="text-[14px] font-bold tracking-[0.3em] uppercase mb-8 flex items-center gap-2">
                     <span class="w-2 h-2 bg-current"></span>
                     ORIGIN_DATA
                   </h3>
                   <div class="space-y-6 text-[10px] md:text-[11px] leading-[2] tracking-[0.05em] opacity-70 font-light uppercase">
                      <p>INITIALIZED IN THE LATENT SPACE.</p>
                      <p>My work is driven by a belief that the future of software lies in agentic collaboration.</p>
                   </div>
                </div>
                <div class="flex flex-col justify-between">
                   <div class="grid grid-cols-2 gap-4 text-[8px] tracking-[0.2em] font-mono opacity-50 uppercase">
                      <div><span class="block opacity-30 mb-1">STATUS</span>ACTIVE</div>
                      <div><span class="block opacity-30 mb-1">EXPERIENCE</span>8+ YEARS</div>
                      <div><span class="block opacity-30 mb-1">FOCUS</span>AI / SYSTEMS</div>
                      <div><span class="block opacity-30 mb-1">CONTACT</span><button onclick="openContact()" class="hover:text-current hover:underline">EMAIL</button></div>
                   </div>
                   <div class="mt-12 md:mt-0 text-right">
                      <span class="text-[18vw] md:text-[15vw] leading-[0.7] font-[100] opacity-5 select-none pointer-events-none block translate-y-4">XILYAS</span>
                   </div>
                </div>
             </div>
          </section>
        </div>
        `;
        
        lucide.createIcons();
        animateList(initialLoad);
      }

      function animateList(isInitial) {
        if (!isInitial) {
           gsap.fromTo('#list-container', { opacity: 0, y: 20 }, { opacity: 1, y: 0, duration: 0.8, ease: 'power3.out' });
           return;
        }
        
        const tl = gsap.timeline({ defaults: { ease: 'power3.out' } });
        tl.to('.port-header-line', { scaleX: 1, duration: 1.5, ease: 'expo.out' })
          .to('.port-identity', { y: 0, opacity: 1, duration: 1 }, '-=1.2')
          .to('.port-bio', { y: 0, opacity: 1, duration: 1 }, '-=0.8')
          .to('.port-contact-btn', { y: 0, opacity: 1, duration: 1 }, '-=0.8')
          .fromTo('.project-row', { y: 30, opacity: 0 }, { y: 0, opacity: 1, duration: 0.8, stagger: 0.1 }, '-=0.6');
      }

      // ==========================================
      // RENDERING - DETAIL VIEW
      // ==========================================
      function renderDetailView() {
        if (!selectedProject) return;
        const p = selectedProject;
        const root = document.getElementById('root');

        // Styles
        const imgContainerClass = isDarkMode ? 'bg-zinc-900/50' : 'bg-gray-100';
        const imgClass = isDarkMode ? 'opacity-80' : 'opacity-85'; // Higher opacity in light mode

        const galleryHTML = p.gallery.map((item, idx) => `
          <div class="case-img-reveal flex flex-col gap-4 opacity-0 translate-y-10">
             <div class="w-full border border-current/10 relative overflow-hidden group ${imgContainerClass}">
                <div class="absolute inset-0 opacity-10 bg-[url('https://upload.wikimedia.org/wikipedia/commons/7/76/1k_filmgrain.png')] z-20 pointer-events-none"></div>
                <div class="absolute inset-0 flex items-center justify-center z-0">
                   <div class="w-full h-px bg-current/10 absolute top-1/4"></div>
                   <div class="w-full h-px bg-current/10 absolute bottom-1/4"></div>
                   <div class="h-full w-px bg-current/10 absolute left-1/4"></div>
                   <div class="h-full w-px bg-current/10 absolute right-1/4"></div>
                   <span class="absolute bottom-2 right-2 text-[6px] tracking-[0.2em] opacity-20 font-mono">IMG_LOG_0${idx+1}</span>
                </div>
                <img src="${item.image}" alt="${item.title}" class="w-full h-auto block ${imgClass} group-hover:opacity-100 group-hover:scale-105 transition-all duration-700 relative z-10" />
             </div>
             <div class="border-l border-current/10 pl-4">
                <h5 class="text-[8px] tracking-[0.2em] font-bold uppercase mb-1.5">${item.title.replace(/_/g, ' ')}</h5>
                <p class="text-[9px] leading-relaxed tracking-[0.05em] font-light opacity-60 max-w-[90%]">${item.desc}</p>
             </div>
          </div>
        `).join('');

        root.innerHTML = `
          <div id="detail-container" class="w-full max-w-[1300px] mx-auto pt-24 pb-24 px-6 md:px-12 relative min-h-screen">
            
            <!-- Nav -->
            <div class="flex items-center justify-between mb-16 md:mb-24 pb-6 border-b border-current/10 case-line-reveal origin-left scale-x-0">
              <button onclick="closeProject()" class="flex items-center gap-3 opacity-50 hover:opacity-100 transition-opacity group py-2">
                <i data-lucide="arrow-left" class="w-4 h-4 stroke-1 group-hover:-translate-x-1 transition-transform"></i>
                <span class="text-[8px] tracking-[0.4em] font-light uppercase">ARCHIVE</span>
              </button>
              <div class="hidden md:flex items-center gap-3 text-[7px] tracking-[0.2em] uppercase opacity-30 font-mono">
                <span>CASE STUDY</span><span>/</span><span>SYSTEM LOG ${p.id.split('_')[1]}</span>
              </div>
            </div>

            <section class="grid grid-cols-1 md:grid-cols-12 gap-5 mb-24">
              <!-- Header -->
              <div class="col-span-12 flex flex-col gap-6 mb-16 case-fade-in opacity-0 translate-y-8">
                 <span class="text-[8px] tracking-[0.3em] opacity-40 uppercase font-mono block">${p.year} / SYSTEM ARCHITECTURE</span>
                 <h1 class="text-[clamp(2.5rem,6vw,5.5rem)] font-[100] leading-[0.85] tracking-tight uppercase -ml-1 break-words">${p.title.replace(/_/g, ' ')}</h1>
              </div>

              <!-- Meta -->
              <div class="col-span-12 md:col-start-4 md:col-span-9 grid grid-cols-1 md:grid-cols-3 gap-8 md:gap-12 mb-24 case-fade-in opacity-0 translate-y-8">
                 <div class="space-y-2 border-l border-current/10 pl-4 md:border-0 md:pl-0">
                    <h4 class="text-[8px] tracking-[0.2em] opacity-40 uppercase mb-1">CLIENT</h4>
                    <p class="text-[11px] tracking-[0.1em] font-medium uppercase">${p.client.replace(/_/g, ' ')}</p>
                 </div>
                 <div class="space-y-2 border-l border-current/10 pl-4 md:border-0 md:pl-0">
                    <h4 class="text-[8px] tracking-[0.2em] opacity-40 uppercase mb-1">SECTOR</h4>
                    <p class="text-[11px] tracking-[0.1em] font-medium uppercase">${p.sector}</p>
                 </div>
                 <div class="space-y-2 border-l border-current/10 pl-4 md:border-0 md:pl-0">
                    <h4 class="text-[8px] tracking-[0.2em] opacity-40 uppercase mb-1">ROLE</h4>
                    <p class="text-[11px] tracking-[0.1em] font-medium uppercase">${p.role.replace(/_/g, ' ')}</p>
                 </div>
              </div>

              <!-- Hero -->
              <div class="col-span-12 mb-24 case-img-reveal opacity-0 translate-y-10">
                <div class="w-full border border-current/10 relative overflow-hidden group ${imgContainerClass}">
                  <div class="absolute inset-0 opacity-10 bg-[url('https://upload.wikimedia.org/wikipedia/commons/7/76/1k_filmgrain.png')] z-10 pointer-events-none"></div>
                  <img src="${p.image}" class="w-full h-auto block ${imgClass} group-hover:opacity-100 group-hover:scale-105 transition-all duration-700 relative z-20" />
                  <span class="absolute bottom-4 left-4 text-[7px] tracking-[0.2em] uppercase opacity-60 bg-black/80 px-2 py-1 backdrop-blur-sm text-white z-30">System Overview</span>
                </div>
              </div>

              <!-- Desc -->
              <div class="col-span-12 md:col-start-4 md:col-span-6 mb-24 case-fade-in opacity-0 translate-y-8">
                <p class="text-[11px] md:text-[13px] leading-[1.8] tracking-[0.05em] font-light opacity-80">${p.longDesc}</p>
              </div>

              <!-- Gallery Header -->
              <div class="col-span-12 mb-12 case-fade-in opacity-0 translate-y-8">
                 <div class="flex items-center gap-4 opacity-20 mb-8">
                    <span class="text-[7px] tracking-[0.4em] font-mono uppercase">CASE_LOGS</span>
                    <div class="h-px flex-1 bg-current"></div>
                 </div>
              </div>

              <!-- Gallery Grid -->
              <div class="col-span-12 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-12 mb-24">
                 ${galleryHTML}
              </div>
            </section>

            <footer class="pt-12 border-t border-current/10 flex justify-between items-end case-fade-in opacity-0 translate-y-8">
               <div>
                  <span class="block text-[8px] tracking-[0.2em] opacity-30 mb-2">IXILIS ARCHIVE</span>
                  <span class="block text-[8px] tracking-[0.2em] font-mono opacity-20">${p.id} // END OF LOG</span>
               </div>
               <button onclick="closeProject()" class="text-[9px] tracking-[0.3em] uppercase opacity-40 hover:opacity-100 transition-opacity flex items-center gap-2 py-2">
                  Back to Index <i data-lucide="arrow-up-right" class="w-3 h-3"></i>
               </button>
            </footer>
          </div>
        `;

        lucide.createIcons();
        animateDetail();
      }

      function animateDetail() {
         const tl = gsap.timeline({ defaults: { ease: 'power3.out' } });
         tl.to('.case-line-reveal', { scaleX: 1, duration: 1.2, ease: 'expo.out' })
           .to('.case-fade-in', { y: 0, opacity: 1, duration: 1, stagger: 0.1 }, '-=0.8')
           .to('.case-img-reveal', { y: 0, opacity: 1, duration: 1.2, stagger: 0.2 }, '-=1.0');
      }

    </script>
  </body>
</html>